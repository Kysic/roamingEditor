<div class="login">
  Connecté en tant que {{sessionInfo.user.firstname}} {{sessionInfo.user.lastname}}
  <button ng-click="setPassword()" ng-show="hasP('P_CHANGE_PASSWORD')">Modifier mon mot de passe</button>
  <button ng-click="logout()" ng-show="hasP('P_LOG_OUT')">Me déconnecter</button>
</div>
<div id="roamingList">
  <h2>Liste des dernières maraudes</h2>
  <div class='spaceUnder'>
    Les comptes rendus de maraudes sont des informations sensibles réservées aux membres de l'association
    <a target='_blank' href='https://www.samu-social-grenoble.fr/'>VINCI</a>.<br>
  </div>
  <ul class="tabs">
    <li ng-repeat="tabMonth in monthList" class="{{isSelectedMonth(tabMonth) ? 'selected' : 'notselected'}}" ng-click="showMonth(tabMonth)">
        {{tabMonth | humanMonth | capitalize}}
    </li>
  </ul>
  <table>
    <tr>
      <th>Date</th>
      <th>Tuteur</th>
      <th>Coéquipier</th>
      <th>Coéquipier</th>
      <th>Coéquipier</th>
      <th>Compte rendu</th>
    </tr>
    <tr ng-repeat="day in calendar" class="{{roamings[day] ? 'done' : planning[day]['status'] }} {{isToday(day) ? 'planningToday' :'' }}">
      <td class="date">{{day | humanDate | capitalize}}</td>
      <td class="tutor">{{roamings[day] ? roamings[day]['tutor'] : planning[day]['tutor']}}</td>
      <td class="teammates">{{roamings[day] ? roamings[day]['teammates'][0] : planning[day]['teammates'][0]}}</td>
      <td class="teammates">{{roamings[day] ? roamings[day]['teammates'][1] : planning[day]['teammates'][1]}}</td>
      <td class="teammates">{{roamings[day] ? roamings[day]['teammates'][2] : planning[day]['teammates'][2]}}</td>
      <td class="reportsActions">
        <button ng-click="printRoaming(day)"
            ng-show="reportsFiles.includes(day) && hasP('P_SEE_LAST_REPORT')">Visualiser</button>
        <button ng-click="printRoaming(roamings[day]['id'])" ng-disabled="editRunning"
            ng-show="roamings[day] && hasP('P_SEE_LAST_REPORT') && !isToday(day)">Visualiser</button>
        <button ng-click="editRoaming(roamings[day]['id'])" ng-disabled="editRunning"
            ng-show="roamings[day] && hasP('P_EDIT_REPORT') && isYesterday(day)">Editer</button>
      </td>
    </tr>
  </table>
</div>
